{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL_PIXABAY = \"https://pixabay.com/api/\";\nconst API_KEY = \"45654098-015d10b92a1455385bf1e768f\";\n\nexport const photoRequest = (param, page) => {\n  const params = {\n    params: {\n      q: param,\n      orientation: \"horizontal\",\n      image_type: \"photo\",\n      safesearch: \"true\",\n      per_page: 15,\n      page: page,\n    }\n  };\n\n  return axios.get(`${URL_PIXABAY}?key=${API_KEY}`, params);\n}\n","export const galleryMarkup = (info) => {\n    return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${info.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${info.webformatURL}\" alt=\"${info.tags}\" />\n    </a>\n    <div class=\"wrapper\">\n    <ul class=\"img\">\n      <li class=\"text-item\">\n        Likes<span class=\"text\">${info.likes}</span>\n      </li>\n      <li class=\"text-item\">\n        Views<span class=\"text\">${info.views}</span>\n      </li>\n      <li class=\"text-item\">\n        Comments<span class=\"text\">${info.comments}</span>\n      </li>\n      <li class=\"text-item\">\n        Downloads<span class=\"text\">${info.downloads}</span>\n      </li>\n    </ul>\n  </div>\n  </li>`;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { photoRequest } from \"./js/pixabay-api\";\nimport { galleryMarkup } from \"./js/render-functions\";\n\nconst formEl = document.querySelector(\".forms\");\nconst galleryEl = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".js-loader\");\nconst loadMoreBtn = document.querySelector(\".js-load-more-btn\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nlet page = 1;\nlet el = \"\";\nlet cardHeigth = 0;\n\nconst loading = () => {\n  loader.classList.remove(\"hidden\");   \n}\nconst hideloading = () => {\n  loader.classList.add(\"hidden\");\n}\n  \nconst searchAndDisplayImages = async (event) => {\n\n  loading();\n\n  try {\n  event.preventDefault();\n  el = formEl.elements.user.value.trim();\n  page = 1;\n\n  if (el === \"\") {\n    iziToast.warning({\n    position: \"topRight\",\n    message: \"Fill in the input field\",\n    });\n    hideloading();\n    return;\n  }\n     \n  const element = await photoRequest(el, page);\n    \n  if (element.data.hits.length === 0) {\n    iziToast.error({\n      position: \"topRight\",\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n    });\n    \n    galleryEl.innerHTML = \"\";\n    \n    return;\n  }\n    \n  const creatingGaleri = element.data.hits.map(imginfo => galleryMarkup(imginfo)).join(\"\");\n  galleryEl.innerHTML = creatingGaleri;\n  lightbox.refresh();\n    \n  loadMoreBtn.classList.remove(\"is-hidden\");\n  }\n  catch (error) {\n    iziToast.error({\n      position: \"topRight\",\n      message: \"An error occurred\",\n    });\n  }\n  finally {\n    hideloading();\n  }\n\n  formEl.reset();\n}\n\nconst pageScrollMarkup = () => {\n  const galleryElement = document.querySelector(\".gallery-item\");\n  cardHeigth = galleryElement.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeigth * 2,\n    behavior: 'smooth',\n  });\n}\n\n\nconst buttonToDownloadMorePhotos = async () => {\n  try {\n    page++\n    const element = await photoRequest(el, page);\n\n    const creatingGaleri = element.data.hits.map(imginfo => galleryMarkup(imginfo)).join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", creatingGaleri);\n    lightbox.refresh();\n\n    pageScrollMarkup();\n    \n    const totalHits = Math.ceil(element.data.totalHits / 15);\n    if (page >= totalHits) {\n      iziToast.info({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      })\n      loadMoreBtn.classList.add(\"is-hidden\");\n    }\n  }\n  catch (error) {\n    iziToast.error({\n      position: \"topRight\",\n      message: \"An error occurred\",\n    });\n  }\n}\n\nformEl.addEventListener(\"submit\", searchAndDisplayImages);\nloadMoreBtn.addEventListener(\"click\", buttonToDownloadMorePhotos);\n"],"names":["URL_PIXABAY","API_KEY","photoRequest","param","page","params","axios","galleryMarkup","info","formEl","galleryEl","loader","loadMoreBtn","lightbox","SimpleLightbox","el","cardHeigth","loading","hideloading","searchAndDisplayImages","event","iziToast","element","creatingGaleri","imginfo","pageScrollMarkup","buttonToDownloadMorePhotos","totalHits"],"mappings":"+vBAEA,MAAMA,EAAc,2BACdC,EAAU,qCAEHC,EAAe,CAACC,EAAOC,IAAS,CAC3C,MAAMC,EAAS,CACb,OAAQ,CACN,EAAGF,EACH,YAAa,aACb,WAAY,QACZ,WAAY,OACZ,SAAU,GACV,KAAMC,CACP,CACL,EAEE,OAAOE,EAAM,IAAI,GAAGN,CAAW,QAAQC,CAAO,GAAII,CAAM,CAC1D,EClBaE,EAAiBC,GACnB;AAAA,oCACyBA,EAAK,aAAa;AAAA,sCAChBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKxCA,EAAK,KAAK;AAAA;AAAA;AAAA,kCAGVA,EAAK,KAAK;AAAA;AAAA;AAAA,qCAGPA,EAAK,QAAQ;AAAA;AAAA;AAAA,sCAGZA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,SCR9CC,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAc,SAAS,cAAc,mBAAmB,EAExDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,eAAgB,EAClB,CAAC,EAED,IAAIV,EAAO,EACPW,EAAK,GACLC,EAAa,EAEjB,MAAMC,EAAU,IAAM,CACpBN,EAAO,UAAU,OAAO,QAAQ,CAClC,EACMO,EAAc,IAAM,CACxBP,EAAO,UAAU,IAAI,QAAQ,CAC/B,EAEMQ,EAAyB,MAAOC,GAAU,CAE9CH,IAEA,GAAI,CAKJ,GAJAG,EAAM,eAAc,EACpBL,EAAKN,EAAO,SAAS,KAAK,MAAM,KAAI,EACpCL,EAAO,EAEHW,IAAO,GAAI,CACbM,EAAS,QAAQ,CACjB,SAAU,WACV,QAAS,yBACb,CAAK,EACDH,IACA,MACD,CAED,MAAMI,EAAU,MAAMpB,EAAaa,EAAIX,CAAI,EAE3C,GAAIkB,EAAQ,KAAK,KAAK,SAAW,EAAG,CAClCD,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0EACf,CAAK,EAEDX,EAAU,UAAY,GAEtB,MACD,CAED,MAAMa,EAAiBD,EAAQ,KAAK,KAAK,IAAIE,GAAWjB,EAAciB,CAAO,CAAC,EAAE,KAAK,EAAE,EACvFd,EAAU,UAAYa,EACtBV,EAAS,QAAO,EAEhBD,EAAY,UAAU,OAAO,WAAW,CACvC,MACa,CACZS,EAAS,MAAM,CACb,SAAU,WACV,QAAS,mBACf,CAAK,CACF,QACO,CACNH,GACD,CAEDT,EAAO,MAAK,CACd,EAEMgB,EAAmB,IAAM,CAE7BT,EADuB,SAAS,cAAc,eAAe,EACjC,sBAAuB,EAAC,OACpD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EAGMU,EAA6B,SAAY,CAC7C,GAAI,CACFtB,IACA,MAAMkB,EAAU,MAAMpB,EAAaa,EAAIX,CAAI,EAErCmB,EAAiBD,EAAQ,KAAK,KAAK,IAAIE,GAAWjB,EAAciB,CAAO,CAAC,EAAE,KAAK,EAAE,EACvFd,EAAU,mBAAmB,YAAaa,CAAc,EACxDV,EAAS,QAAO,EAEhBY,IAEA,MAAME,EAAY,KAAK,KAAKL,EAAQ,KAAK,UAAY,EAAE,EACnDlB,GAAQuB,IACVN,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EACDT,EAAY,UAAU,IAAI,WAAW,EAExC,MACa,CACZS,EAAS,MAAM,CACb,SAAU,WACV,QAAS,mBACf,CAAK,CACF,CACH,EAEAZ,EAAO,iBAAiB,SAAUU,CAAsB,EACxDP,EAAY,iBAAiB,QAASc,CAA0B"}